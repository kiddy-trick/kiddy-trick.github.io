var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(l){var g=0;return function(){return g<l.length?{done:!1,value:l[g++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.makeIterator=function(l){var g="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return g?g.call(l):$jscomp.arrayIterator(l)};
var cartApi=function(){function l(){localStorage.setItem("shoppingCart",JSON.stringify(g))}var g=[],u=function(d,f,c,m,q){this.id=d;this.title=f;this.price=c;this.url=m;this.count=q};null!=localStorage.getItem("shoppingCart")&&(g=JSON.parse(localStorage.getItem("shoppingCart")));return{addNewItemToCart:function(d,f,c,m,q){for(var v=$jscomp.makeIterator(g),n=v.next();!n.done;n=v.next())if(n=n.value,n.id===d)return n.count+=q,l(),n.count;d=new u(d,f,c,m,q);g.push(d);l();return d.count},addItemToCart:function(d){for(var f=
$jscomp.makeIterator(g),c=f.next();!c.done;c=f.next())if(c=c.value,c.id==d)return c.count++,l(),c.count},setCountForItem:function(d,f){for(var c=$jscomp.makeIterator(g),m=c.next();!m.done;m=c.next())if(m=m.value,m.id===d)return m.count=f,l(),m.count},removeItemFromCart:function(d){for(var f=$jscomp.makeIterator(g),c=f.next();!c.done;c=f.next())if(c=c.value,c.id===d)return c.count--,0===c.count&&g.splice(g.indexOf(c),1),l(),c.count},removeItemFromCartAll:function(d){for(var f=$jscomp.makeIterator(g),
c=f.next();!c.done;c=f.next())if(c=c.value,c.id===d){g.splice(g.indexOf(c),1);l();break}},clearCart:function(){g=[];l()},totalCount:function(){for(var d=0,f=$jscomp.makeIterator(g),c=f.next();!c.done;c=f.next())d+=c.value.count;return d},totalCart:function(){for(var d=0,f=$jscomp.makeIterator(g),c=f.next();!c.done;c=f.next())c=c.value,d+=c.price*c.count;return Number(d.toFixed(2))},listCart:function(){return g},cartToQuerry:function(){for(var d="",f=$jscomp.makeIterator(g),c=f.next();!c.done;c=f.next())item=
c.value,d+="&product="+encodeURIComponent(item.title)+"&price="+encodeURIComponent(item.price)+"&count="+encodeURIComponent(item.count)+"&url="+encodeURIComponent(item.url);return d}}}();
(function(){function l(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function g(){var a=cartApi.listCart(),b=document.querySelector(".show-cart");b.innerHTML="";var h=document.createDocumentFragment();if(0==a.length){a=document.createElement("div");var e=document.createElement("h4");e.innerText="\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043f\u043e\u043a\u0430 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442.";a.appendChild(e);e=document.createElement("p");e.innerText=
'\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"';a.appendChild(e);h.appendChild(a)}else for(a=$jscomp.makeIterator(a),e=a.next();!e.done;e=a.next()){e=e.value;var p=document.createElement("div");p.id=e.id;p.classList.add("cart-item");var r=document.createElement("a");
r.href=e.url;p.appendChild(r);var k=document.createElement("img");k.classList.add("image");k.src="/images/catalog"+e.url+"-01_400w.jpg";r.appendChild(k);r=document.createElement("div");r.classList.add("cart-text");p.appendChild(r);k=document.createElement("a");k.href=e.url;k.innerText=e.title;r.appendChild(k);k=document.createElement("h3");k.innerText=l(e.price)+" \u20bd";r.appendChild(k);var w=document.createElement("div");r.appendChild(w);k=document.createElement("a");k.classList.add("minus-item",
"button");k.setAttribute("data",e.id);k.innerText="-";w.appendChild(k);k=document.createElement("span");k.setAttribute("data",e.id);k.innerText=e.count;w.appendChild(k);k=document.createElement("a");k.classList.add("plus-item","button");k.setAttribute("data",e.id);k.innerText="+";w.appendChild(k);h.appendChild(p)}b.appendChild(h)}function u(){var a=cartApi.totalCart(),b=cartApi.totalCount(),h=document.querySelectorAll(".total-count");h=$jscomp.makeIterator(h);for(var e=h.next();!e.done;e=h.next())e.value.innerText=
b;document.querySelector(".total-cart").innerText=l(a);h=document.querySelector(".order");0<b&&h.classList.contains("disabled")?h.classList.remove("disabled"):0!=b||h.classList.contains("disabled")||h.classList.add("disabled");document.querySelector(".cart-string").setAttribute("value",a)}var d=document.querySelector("body"),f=document.querySelector("#nav"),c=document.querySelector('a[href="#nav"]'),m=document.querySelector("#nav .close"),q=document.querySelector("#cart"),v=document.querySelectorAll('a[href="#cart"]'),
n=document.querySelector("#cart .close"),t=document.querySelector("#backtotop");window.addEventListener("DOMContentLoaded",function(){d.classList.remove("is-loading");d.classList.remove("trans")});var x=function(){f.classList.remove("visible");d.classList.remove("menu-visible")},y=function(){q.classList.remove("visible");d.classList.remove("menu-visible")},B=function(){q.classList.toggle("visible");d.classList.toggle("menu-visible")};d.addEventListener("click",function(a){d.classList.contains("menu-visible")&&
(a.preventDefault(),a.stopPropagation(),x(),y())},!1);f.addEventListener("click",function(a){a.stopPropagation()},!1);q.addEventListener("click",function(a){a.stopPropagation()},!1);c.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();f.classList.toggle("visible");d.classList.toggle("menu-visible")},!1);m.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();x()},!1);c=$jscomp.makeIterator(v);for(m=c.next();!m.done;m=c.next())m.value.addEventListener("click",
function(a){a.preventDefault();a.stopPropagation();B()},!1);n.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();y()},!1);var C=function(a){var b=this.getAttribute("href"),h=this.getAttribute("target");b&&-1==b.indexOf("#")&&-1==b.indexOf("tel")&&-1==b.indexOf("wa.me")&&-1==b.indexOf("mailto")&&"_blank"!=h&&(a.preventDefault(),a.stopPropagation(),x(),y(),d.classList.add("trans"),window.setTimeout(function(){window.location.href=b;console.log("250")},250))};d.addEventListener("click",
function(a){for(var b=a.target;b&&b!=this;b=b.parentNode)if(b.matches("a")){C.call(b,a);break}},!1);f.addEventListener("click",function(a){for(var b=a.target;b&&b!=this;b=b.parentNode)if(b.matches("a")){C.call(b,a);break}},!1);window.addEventListener("pageshow",function(a){!0===a.persisted&&d.classList.remove("trans")},!1);t&&t.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();d.scrollIntoView(!0,{behavior:"smooth"})},!1);g();u();n=document.querySelector(".order");t=document.querySelectorAll(".return-to-cart");
var z=document.querySelector(".cart-cart"),A=document.querySelector(".form-wrapper");n.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();this.classList.contains("disabled")||(z.classList.add("hide"),A.classList.remove("hide"),A.classList.add("fade-in"))});n=$jscomp.makeIterator(t);for(t=n.next();!t.done;t=n.next())t.value.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();A.classList.add("hide");z.classList.remove("hide");z.classList.add("fade-in");
a=this.parentNode;if(a.classList.contains("form-success")||a.classList.contains("form-error")){var b=document.querySelector(".ajax-form");a.classList.add("hide");b.classList.remove("hide");b.classList.add("fade-in")}});(n=document.querySelector(".add-to-cart"))&&n.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();a=document.getElementById("product");a=JSON.parse(a.textContent);0==cartApi.totalCount()&&B();cartApi.addNewItemToCart(a.id,a.title,a.price,a.url,1);g();u();var b=
this;b.innerHTML="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e";window.setTimeout(function(){b.innerHTML="\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"},2500,b)},!1);q.addEventListener("click",function(a){for(var b=a.target;b&&b!=this;b=b.parentNode)if(b.matches(".minus-item, .plus-item")){a.preventDefault();a.stopPropagation();var h=b.getAttribute("data");a=b.parentNode.querySelector("span");b.classList.contains("plus-item")?a.innerText=cartApi.addItemToCart(h):(h=cartApi.removeItemFromCart(h),
0<h?a.innerText=h:(b=b.parentNode.parentNode.parentNode,b.parentNode.removeChild(b)));u();break}},!1);document.querySelector(".ajax-form").addEventListener("submit",function(a){a.preventDefault();var b=this.parentNode.querySelector(".form-loading"),h=this.parentNode.querySelector(".form-success"),e=this.parentNode.querySelector(".form-error");a={name:this.elements.name.value,email:this.elements.email.value,message:this.elements.message.value,cart_sum:this.elements.cartstring.value,cart:cartApi.listCart()};
this.classList.add("hide");b.classList.remove("hide");b.classList.add("fade-in");var p=new XMLHttpRequest;p.open("POST","https://notstupidapp.ew.r.appspot.com/shopapi/kiddytrick");p.onload=function(){200<=this.status&&400>this.status?(console.log("Success"),console.log(this.responseText),b.classList.add("hide"),h.classList.remove("hide"),h.classList.add("fade-in"),cartApi.clearCart(),g(),u()):(console.log("Server returned error"),b.classList.add("hide"),e.classList.remove("hide"),e.classList.add("fade-in"))};
p.onerror=function(){console.log("Connection error");b.classList.add("hide");e.classList.remove("hide");e.classList.add("fade-in")};p.send(JSON.stringify(a))},!1)})();